"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[438],{3438:(J,g,s)=>{s.r(g),s.d(g,{SchoolAnalysisModule:()=>L});var c=s(9808),p=s(8581),S=s(1424),m=s(4119),l=s(4182),f=s(9441),t=s(2096),v=s(8388),x=s(2290),y=s(8965),u=s(778),A=s(9783),d=s(845);function T(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",10)(1,"form",11),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.reportForm.valid&&r.selectSchool())}),t._UZ(2,"p-dropdown",12),t.TgZ(3,"button",13),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.selectSchool())}),t.qZA()(),t.TgZ(4,"button",14),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.exportExcel())}),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.reportForm),t.xp6(1),t.Q6J("options",o.schools)("filter",!0)}}function _(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"th",15)(2,"div",16),t._uU(3),t.qZA()(),t.BQk()),2&e){const o=n.$implicit;t.xp6(3),t.hij(" ",o," ")}}function C(e,n){if(1&e&&(t.TgZ(0,"tr")(1,"th",15)(2,"div",16),t._uU(3,"Student Level"),t.qZA()(),t.YNc(4,_,4,1,"ng-container",17),t.qZA()),2&e){const o=t.oxw();t.xp6(4),t.Q6J("ngForOf",o.subjects)}}function b(e,n){if(1&e&&(t.TgZ(0,"tr")(1,"td",18)(2,"div",19),t._UZ(3,"button",20),t.TgZ(4,"span",21),t._uU(5),t.qZA()()()()),2&e){const o=n.$implicit,i=n.expanded;t.xp6(3),t.Q6J("pRowToggler",o)("icon",i?"pi pi-chevron-down":"pi pi-chevron-right"),t.xp6(2),t.Oqu(o.level)}}function M(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const o=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.formatGrade(o.averageGrade),"% ")}}function Z(e,n){1&e&&(t.TgZ(0,"td",23),t._uU(1,"0%"),t.qZA())}function O(e,n){if(1&e&&(t.ynx(0),t.YNc(1,M,2,1,"td",22),t.YNc(2,Z,2,0,"td",22),t.BQk()),2&e){const o=n.$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",o==i.course),t.xp6(1),t.Q6J("ngIf",o!=i.course)}}function G(e,n){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,O,3,2,"ng-container",17),t.qZA()),2&e){const o=n.$implicit,i=t.oxw();t.xp6(2),t.hij(" ",o.level," "),t.xp6(1),t.Q6J("ngForOf",i.subjects)}}function E(e,n){1&e&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2,"No information found."),t.qZA()())}const F=function(){return[10,25,50]};let w=(()=>{class e{constructor(o,i,r,a){this.fb=o,this.reportService=i,this.toastService=r,this.busyService=a,this.allGrades=[[{course:"Computer Science with Finance",level:"",organization:"MESD LMS Development Site",averageGrade:20.765765765765767},{course:"Computer Science with Finance",level:"Standard 1",organization:"MESD LMS Development Site",averageGrade:25.4},{course:"Algorithms",level:"",organization:"MESD LMS Development Site",averageGrade:14.882352941176471},{course:"Algorithms",level:"Level 400",organization:"MESD LMS Development Site",averageGrade:13.4},{course:"Algorithms",level:"Standard 1",organization:"MESD LMS Development Site",averageGrade:15.2},{course:"INTRODUCTION TO BIOLOGY",level:"",organization:"MESD LMS Development Site",averageGrade:-4.5},{course:"INTRODUCTION TO BIOLOGY",level:"Standard 1",organization:"MESD LMS Development Site",averageGrade:-3.8},{course:"Computer Science with Finance",level:"Level 400",organization:"MESD LMS Development Site",averageGrade:0}]],this.grades=[],this.schools=[],this.subjects=[]}initializeForm(){this.reportForm=this.fb.group({school:["",[l.kI.required]]})}ngOnInit(){this.getReportStatusUpdate(),this.initializeForm()}getReportStatusUpdate(){this.busyService.busy(),this.reportService.getGrades().subscribe(o=>{this.allGrades=o;let r=0;this.allGrades.forEach(a=>{this.schools.includes({name:a[0].organization,index:r})||this.schools.push({name:a[0].organization,index:r}),r++}),this.busyService.idle()},o=>{this.busyService.idle(),this.toastService.error("An error has occured please try again and report the issue if it persists","Error")})}selectSchool(){this.grades=this.allGrades[this.reportForm.controls.school.value.index],this.grades.forEach(o=>{this.subjects.includes(o.course)||this.subjects.push(o.course)})}formatGrade(o){return o.toFixed(2)}exportExcel(){s.e(574).then(s.bind(s,574)).then(o=>{const r={Sheets:{data:o.utils.json_to_sheet(this.grades)},SheetNames:["data"]},a=o.write(r,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(a,"products")})}saveAsExcelFile(o,i){const z=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});f.saveAs(z,i+"_export_"+(new Date).getTime()+".xlsx")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.qu),t.Y36(v.r),t.Y36(x._W),t.Y36(y.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-school-analysis"]],decls:11,vars:6,consts:[[1,"content-container"],[1,"title-container"],[1,"text"],["styleClass","p-datatable-gridlines p-datatable-striped","dataKey","id","rowGroupMode","subheader","groupRowsBy","level","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","groupheader"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[1,"flex"],[1,"flex",3,"formGroup","ngSubmit"],["formControlName","school","optionLabel","name","placeholder","Organisation",3,"options","filter"],["type","button","pButton","","pRipple","","icon","pi pi-search","pTooltip","Select Organization","tooltipPosition","bottom",1,"p-button-info","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],[2,"min-width","15rem"],[1,"flex","align-items-center"],[4,"ngFor","ngForOf"],["colspan","5"],[1,"toggle"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain","mr-2",3,"pRowToggler","icon"],[1,"font-bold","ml-2"],["class","right",4,"ngIf"],[1,"right"],["colspan","7"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"School Analysis"),t.qZA()(),t.TgZ(4,"p-table",3,4),t.YNc(6,T,5,3,"ng-template",5),t.YNc(7,C,5,1,"ng-template",6),t.YNc(8,b,6,3,"ng-template",7),t.YNc(9,G,4,2,"ng-template",8),t.YNc(10,E,3,0,"ng-template",9),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("value",i.grades)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(5,F))("paginator",!0))},dependencies:[c.sg,c.O5,u.Lt,A.jx,l._Y,l.JJ,l.JL,l.sg,l.u,p.iA,p.jB,d.Hq,m.u],styles:[".content-container[_ngcontent-%COMP%]{padding:0 2rem}.title-container[_ngcontent-%COMP%]{border-bottom:1px solid var(--light-gray);padding:1rem 0}.flex[_ngcontent-%COMP%]{gap:1rem;display:flex}.right[_ngcontent-%COMP%]{text-align:right!important}.toggle[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}"]}),e})();var h=s(8674);const N=[{path:"",component:w}];let D=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(N),h.Bz]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,u.kW,l.UX,D,p.U$,d.hJ,S.j,m.z]}),e})()}}]);