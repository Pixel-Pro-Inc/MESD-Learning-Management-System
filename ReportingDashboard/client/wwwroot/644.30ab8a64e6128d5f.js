"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[644],{6644:(k,m,i)=>{i.r(m),i.d(m,{EditUserModule:()=>A});var u=i(9808),o=i(4182),e=i(2096),f=i(7730),b=i(7628),y=i(1871),C=i(2290),v=i(8965),Z=i(576),U=i(4008),p=i(6526);const M=function(r,s,t){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":r,"p-disabled":s,"p-focus":t}},F={provide:o.JU,useExisting:(0,e.Gpc)(()=>h),multi:!0};let h=(()=>{class r{constructor(t){this.cd=t,this.trueValue=!0,this.falseValue=!1,this.onChange=new e.vpe,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(t,n){!this.disabled&&!this.readonly&&(t.preventDefault(),this.toggle(t),n.focus())}onInputChange(t){this.readonly||this.updateModel(t,t.target.checked)}toggle(t){this.updateModel(t,!this.checked())}updateModel(t,n){this.modelValue=n?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:t,checked:this.modelValue})}onFocus(t){this.focused=!0}onBlur(t){this.focused=!1,this.onModelTouched()}writeValue(t){this.modelValue=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[e._Bn([F])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(t,n){if(1&t){const c=e.EpF();e.TgZ(0,"div",0),e.NdJ("click",function(l){e.CHM(c);const d=e.MAs(3);return e.KtG(n.onClick(l,d))}),e.TgZ(1,"div",1)(2,"input",2,3),e.NdJ("change",function(l){return n.onInputChange(l)})("focus",function(l){return n.onFocus(l)})("blur",function(l){return n.onBlur(l)}),e.qZA()(),e._UZ(4,"span",4),e.qZA()}2&t&&(e.Tol(n.styleClass),e.Q6J("ngClass",e.kEZ(12,M,n.checked(),n.disabled,n.focused))("ngStyle",n.style),e.xp6(2),e.Q6J("checked",n.checked())("disabled",n.disabled),e.uIk("aria-label",n.ariaLabel)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-checked",n.checked())("aria-labelledby",n.ariaLabelledBy))},dependencies:[u.mk,u.PC],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),r})(),S=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.ez]}),r})();function _(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"article")(1,"div",16)(2,"h4"),e._uU(3),e.qZA(),e.TgZ(4,"div",17)(5,"button",18),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.edit(a))}),e._uU(6,"Edit"),e.qZA()()()()}if(2&r){const t=s.$implicit;e.xp6(3),e.lnq(" ",t.firstName," ",t.lastName," (",t.nationalIdentityNumber,") ")}}let E=(()=>{class r{constructor(t,n,c,a,l,d){this.fb=t,this.preferencesService=n,this.countryCodeService=c,this.accountService=a,this.toastService=l,this.busyService=d,this.users=[],this.userToEdit=null,this.permissions=["Administrator","Account Management","Permits","Certificates","Licenses","External"]}ngOnInit(){this.initializeForm(),this.busyService.busy(),this.countryCodeService.getCountries().then(t=>{this.countries=t.filter(n=>null!=n)}),this.accountService.getUsers().subscribe(t=>{this.users=t,this.busyService.idle()},t=>{this.busyService.idle(),this.toastService.error("An error has occured please try again and report the issue if it persists.","Error")})}initializeForm(){this.userForm=this.fb.group({firstname:["",[o.kI.required]],lastname:["",[o.kI.required]],username:["",[o.kI.required]],permissions:["",[o.kI.required]],email:["",[o.kI.required,o.kI.email]],nationalIdentityNumber:["",[o.kI.required]],countryCode:["",o.kI.required],phoneNumber:["",o.kI.required],accountEnabled:["",o.kI.required]})}edit(t){this.userToEdit=t,this.userForm.controls.firstname.setValue(t.firstName),this.userForm.controls.lastname.setValue(t.lastName),this.userForm.controls.username.setValue(t.username),this.userForm.controls.permissions.setValue(t.permissions),this.userForm.controls.email.setValue(t.email),this.userForm.controls.accountEnabled.setValue(t.accountEnabled),this.userForm.controls.nationalIdentityNumber.setValue(t.nationalIdentityNumber),this.userForm.controls.countryCode.setValue(this.countries.filter(n=>n.dialingCode==t.phoneNumber.countryCode)[0]),this.userForm.controls.phoneNumber.setValue(t.phoneNumber.number)}editUser(){if(null==this.userToEdit)return void this.toastService.error("You have to select a user");let t={id:this.userToEdit.id,firstName:this.userForm.controls.firstname.value,lastName:this.userForm.controls.lastname.value,username:this.userForm.controls.username.value,accountEnabled:this.userForm.controls.accountEnabled.value,permissions:this.userForm.controls.permissions.value,email:this.userForm.controls.email.value,nationalIdentityNumber:this.userForm.controls.nationalIdentityNumber.value,phoneNumber:{countryCode:this.userForm.controls.countryCode.value.dialingCode.substring(this.userForm.controls.countryCode.value.dialingCode.indexOf("+")),number:this.userForm.controls.phoneNumber.value}};this.busyService.busy(),this.accountService.editUser(t).subscribe(n=>{this.busyService.idle(),this.toastService.success("User successfully edited!")},n=>{this.busyService.idle(),this.toastService.error(n.error,"Error")})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(o.qu),e.Y36(f.y),e.Y36(b.w),e.Y36(y.B),e.Y36(C._W),e.Y36(v.z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user"]],decls:51,vars:30,consts:[[1,"content-container"],[1,"title-container"],[1,"text"],[1,"container"],[1,"user-container"],[4,"ngFor","ngForOf"],[1,"form-container",3,"formGroup","ngSubmit"],[1,"form-group-two-column"],[1,"form-control-group"],[1,"form-control-container",3,"type","formControl","label","placeholder"],[3,"type","formControl","label","placeholder"],["formControlName","permissions","defaultLabel","Select permissions",3,"filter","options"],[3,"formControl"],["id","'phoneNumber",1,"form-control-container",3,"type","formControl","label","placeholder"],["formControlName","accountEnabled"],[1,"btn","btn-register",3,"disabled"],[1,"item-container"],[1,"item-actions-container"],[1,"btn","btn-action",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Edit User"),e.qZA()(),e.TgZ(4,"article",3)(5,"article",4),e.YNc(6,_,7,3,"article",5),e.qZA(),e.TgZ(7,"form",6),e.NdJ("ngSubmit",function(){return n.userForm.valid&&n.editUser()}),e.TgZ(8,"article",7)(9,"div",8)(10,"label",2),e._uU(11,"First Name"),e.qZA(),e._UZ(12,"app-text-input",9),e.qZA(),e.TgZ(13,"div",8)(14,"label",2),e._uU(15,"Last Name"),e.qZA(),e._UZ(16,"app-text-input",10),e.qZA()(),e.TgZ(17,"article",7)(18,"div",8)(19,"label",2),e._uU(20,"User Name"),e.qZA(),e._UZ(21,"app-text-input",9),e.qZA(),e.TgZ(22,"div",8)(23,"label",2),e._uU(24,"Email"),e.qZA(),e._UZ(25,"app-text-input",10),e.qZA()(),e.TgZ(26,"article",7)(27,"div",8)(28,"label",2),e._uU(29,"National Identity Number"),e.qZA(),e._UZ(30,"app-text-input",9),e.qZA(),e.TgZ(31,"div",8)(32,"label",2),e._uU(33,"Permissions"),e.qZA(),e._UZ(34,"p-multiSelect",11),e.qZA()(),e.TgZ(35,"article",7)(36,"div",8)(37,"label",2),e._uU(38,"Dialing Code"),e.qZA(),e._UZ(39,"app-country-code-selection",12),e.qZA(),e.TgZ(40,"div",8)(41,"label",2),e._uU(42,"Phone Number"),e.qZA(),e._UZ(43,"app-text-input",13),e.qZA()(),e.TgZ(44,"article",7)(45,"div",8)(46,"label",2),e._uU(47,"Enable Account"),e.qZA(),e._UZ(48,"p-inputSwitch",14),e.qZA(),e.TgZ(49,"button",15),e._uU(50," Edit User "),e.qZA()()()()()),2&t&&(e.xp6(6),e.Q6J("ngForOf",n.users),e.xp6(1),e.Q6J("formGroup",n.userForm),e.xp6(5),e.Q6J("type","text")("formControl",n.userForm.controls.firstname)("label","first name")("placeholder","First Name"),e.xp6(4),e.Q6J("type","text")("formControl",n.userForm.controls.lastname)("label","last name")("placeholder","Last Name"),e.xp6(5),e.Q6J("type","text")("formControl",n.userForm.controls.username)("label","user name")("placeholder","User Name"),e.xp6(4),e.Q6J("type","email")("formControl",n.userForm.controls.email)("label","email")("placeholder","Email"),e.xp6(5),e.Q6J("type","text")("formControl",n.userForm.controls.nationalIdentityNumber)("label","national identity number")("placeholder","National Identity Number"),e.xp6(4),e.Q6J("filter",!1)("options",n.permissions),e.xp6(5),e.Q6J("formControl",n.userForm.controls.countryCode),e.xp6(4),e.Q6J("type","text")("formControl",n.userForm.controls.phoneNumber)("label","phone number")("placeholder","Enter phone number"),e.xp6(6),e.Q6J("disabled",!n.userForm.valid))},dependencies:[u.sg,o._Y,o.JJ,o.JL,o.oH,o.sg,o.u,Z.t,U.D,p.NU,h],styles:[".content-container[_ngcontent-%COMP%]{padding:0 2rem}.title-container[_ngcontent-%COMP%]{border-bottom:1px solid var(--light-gray);padding:1rem 0}.form-container[_ngcontent-%COMP%]{padding:1rem;width:100%}.form-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;padding:1rem}.form-group-two-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;padding:1rem}.form-group-one-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,1fr);gap:1rem;padding:1rem}label[_ngcontent-%COMP%]{font-size:.8rem;display:block;margin:.5rem 0}.btn-register[_ngcontent-%COMP%]{width:100%;height:min-content;border-radius:.25rem;align-self:flex-end}.phone-number-group[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-shrink:0;gap:.5rem}.text-form-control[_ngcontent-%COMP%]{text-align:center}.text-form-control.country-code[_ngcontent-%COMP%]{width:min-content;height:min-content;font-weight:700}.country-code-container[_ngcontent-%COMP%]{display:flex;gap:.25rem}.form-control-container[_ngcontent-%COMP%]{width:100%}.time-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}input[type=file][_ngcontent-%COMP%]{font-size:.6rem}[_nghost-%COMP%]     .p-multiselect{width:100%;max-width:100%}[_nghost-%COMP%]     .p-multiselect:hover{font-family:sans-serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr}.user-container[_ngcontent-%COMP%]{height:calc(100vh - var(--navbar-height) - 60px);overflow-y:scroll}.item-container[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;padding-left:0;align-items:center;justify-content:space-between;border-bottom:.5px solid var(--light-gray)}.item-actions-container[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.btn-action[_ngcontent-%COMP%]{padding:.25rem .75rem;font-size:.75rem;border-radius:.25rem}"]}),r})();var g=i(9842);const N=[{path:"",component:E}];let I=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.Bz.forChild(N),g.Bz]}),r})();var T=i(4498);let A=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.ez,I,o.UX,T.e,p.q4,S]}),r})()}}]);